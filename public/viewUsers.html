<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/resources/css/index.css">
    <title>Document</title>
</head>
<body>
    <!DOCTYPE html>
<html>
<head>
    <title>Table Example</title>
</head>
<body>
    <div class="header">
        <div class="logo">
            <img src="/resources/images/logo.png" alt="DKM Blood Donor Logo">
        </div>
        <div class="navigation">
            <ul>
                <li><a href="login.html" class="active">Login</a></li>
                <li><a href="register.html">Register</a></li>
                <li><a href="aboutus.html">About Us</a></li>
                <li><a href="contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    <table id="data-table" border="1">
        <thead>
            <tr>
                <th>Username</th>
                <th>Email</th>
                <th>Age</th>
                <th>Sex</th>
                <th>Address</th>
                <th>Phone Number</th>
                <th>Medical Profile</th>
                <th>Blood Type</th>
                <th>Open to Donations</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
</body>
<script>
    const options = {
        method: 'GET',
    }
    fetch('/get-users', options)
    .then((res) => { return res.json()})
    .then((data) => {
        const tableBody = document.getElementById("data-table")
        for (let i =0; i<data.length; i++){
                const user = data[i];
                const row = tableBody.insertRow();

                // Create table cells for each field and populate them with data
                const usernameCell = row.insertCell(0);
                usernameCell.textContent = user.username;

                const emailCell = row.insertCell(1);
                emailCell.textContent = user.email;

                const sexCell = row.insertCell(2);
                sexCell.textContent = user.sex;

                const ageCell = row.insertCell(3);
                ageCell.textContent = user.age;

                const addressCell = row.insertCell(4);
                addressCell.textContent = user.address;

                const phoneCell = row.insertCell(5);
                phoneCell.textContent = user.phone_number;

                const medicalProfileCell = row.insertCell(6);
                medicalProfileCell.textContent = user.medical_profile;

                const bloodTypeCell = row.insertCell(7);
                bloodTypeCell.textContent = user.blood_type;

                const openToDonationsCell = row.insertCell(8);
                openToDonationsCell.textContent = user.open_to_donations ? "Yes" : "No";
            
            
        }
    })
    .catch((err)=> console.log(err))
</script>
</html>
